"use strict";

var _express = require("express");

var _express2 = _interopRequireDefault(_express);

var _mongoose = require("mongoose");

var _mongoose2 = _interopRequireDefault(_mongoose);

var _morgan = require("morgan");

var _morgan2 = _interopRequireDefault(_morgan);

var _httpStatusCodes = require("http-status-codes");

var _swaggerUiExpress = require("swagger-ui-express");

var _swaggerUiExpress2 = _interopRequireDefault(_swaggerUiExpress);

var _swagger = require("./config/swagger.json");

var _swagger2 = _interopRequireDefault(_swagger);

var _cors = require("cors");

var _cors2 = _interopRequireDefault(_cors);

var _index = require("./api/index");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_mongoose2.default.Promise = global.Promise;
_mongoose2.default.connect("mongodb://localhost/invoice-builder");

var app = (0, _express2.default)();
var PORT = 3000;

app.use(_express2.default.json());
app.use(_express2.default.urlencoded({ extended: true }));
app.use((0, _cors2.default)());
app.use((0, _morgan2.default)("dev"));
app.use("/api-docs", _swaggerUiExpress2.default.serve, _swaggerUiExpress2.default.setup(_swagger2.default, {
  explorer: true
}));
app.use("/api", _index.restRouter);
app.use(function (req, res, next) {
  var error = new Error("Not Found!");
  error.message = "Invalid Route";
  error.status = _httpStatusCodes.StatusCodes.NOT_FOUND;
  next(error);
});
app.use(function (error, req, res, next) {
  res.status(error.status || _httpStatusCodes.StatusCodes.INTERNAL_SERVER_ERROR);
  return res.json({
    error: {
      message: error.message
    }
  });
});

app.listen(PORT, function () {
  console.log("Server is running at " + PORT);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hcHAuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJQcm9taXNlIiwiZ2xvYmFsIiwiY29ubmVjdCIsImFwcCIsIlBPUlQiLCJ1c2UiLCJleHByZXNzIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN3YWdnZXJVaSIsInNlcnZlIiwic2V0dXAiLCJzd2FnZ2VyRG9jdW1lbnQiLCJleHBsb3JlciIsInJlc3RSb3V0ZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJTdGF0dXNDb2RlcyIsIk5PVF9GT1VORCIsIklOVEVSTkFMX1NFUlZFUl9FUlJPUiIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQUEsbUJBQVNDLE9BQVQsR0FBbUJDLE9BQU9ELE9BQTFCO0FBQ0FELG1CQUFTRyxPQUFULENBQWlCLHFDQUFqQjs7QUFFQSxJQUFNQyxNQUFNLHdCQUFaO0FBQ0EsSUFBTUMsT0FBTyxJQUFiOztBQUVBRCxJQUFJRSxHQUFKLENBQVFDLGtCQUFRQyxJQUFSLEVBQVI7QUFDQUosSUFBSUUsR0FBSixDQUFRQyxrQkFBUUUsVUFBUixDQUFtQixFQUFFQyxVQUFVLElBQVosRUFBbkIsQ0FBUjtBQUNBTixJQUFJRSxHQUFKLENBQVEscUJBQVI7QUFDQUYsSUFBSUUsR0FBSixDQUFRLHNCQUFPLEtBQVAsQ0FBUjtBQUNBRixJQUFJRSxHQUFKLENBQ0UsV0FERixFQUVFSywyQkFBVUMsS0FGWixFQUdFRCwyQkFBVUUsS0FBVixDQUFnQkMsaUJBQWhCLEVBQWlDO0FBQy9CQyxZQUFVO0FBRHFCLENBQWpDLENBSEY7QUFPQVgsSUFBSUUsR0FBSixDQUFRLE1BQVIsRUFBZ0JVLGlCQUFoQjtBQUNBWixJQUFJRSxHQUFKLENBQVEsVUFBQ1csR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsRUFBb0I7QUFDMUIsTUFBTUMsUUFBUSxJQUFJQyxLQUFKLENBQVUsWUFBVixDQUFkO0FBQ0FELFFBQU1FLE9BQU4sR0FBZ0IsZUFBaEI7QUFDQUYsUUFBTUcsTUFBTixHQUFlQyw2QkFBWUMsU0FBM0I7QUFDQU4sT0FBS0MsS0FBTDtBQUNELENBTEQ7QUFNQWhCLElBQUlFLEdBQUosQ0FBUSxVQUFDYyxLQUFELEVBQVFILEdBQVIsRUFBYUMsR0FBYixFQUFrQkMsSUFBbEIsRUFBMkI7QUFDakNELE1BQUlLLE1BQUosQ0FBV0gsTUFBTUcsTUFBTixJQUFnQkMsNkJBQVlFLHFCQUF2QztBQUNBLFNBQU9SLElBQUlWLElBQUosQ0FBUztBQUNkWSxXQUFPO0FBQ0xFLGVBQVNGLE1BQU1FO0FBRFY7QUFETyxHQUFULENBQVA7QUFLRCxDQVBEOztBQVNBbEIsSUFBSXVCLE1BQUosQ0FBV3RCLElBQVgsRUFBaUIsWUFBWTtBQUMzQnVCLFVBQVFDLEdBQVIsMkJBQW9DeEIsSUFBcEM7QUFDRCxDQUZEIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuaW1wb3J0IGxvZ2dlciBmcm9tIFwibW9yZ2FuXCI7XHJcbmltcG9ydCB7IFN0YXR1c0NvZGVzIH0gZnJvbSBcImh0dHAtc3RhdHVzLWNvZGVzXCI7XHJcbmltcG9ydCBzd2FnZ2VyVWkgZnJvbSBcInN3YWdnZXItdWktZXhwcmVzc1wiO1xyXG5pbXBvcnQgc3dhZ2dlckRvY3VtZW50IGZyb20gXCIuL2NvbmZpZy9zd2FnZ2VyLmpzb25cIjtcclxuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcclxuaW1wb3J0IHsgcmVzdFJvdXRlciB9IGZyb20gXCIuL2FwaS9pbmRleFwiO1xyXG5cclxubW9uZ29vc2UuUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xyXG5tb25nb29zZS5jb25uZWN0KFwibW9uZ29kYjovL2xvY2FsaG9zdC9pbnZvaWNlLWJ1aWxkZXJcIik7XHJcblxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbmNvbnN0IFBPUlQgPSAzMDAwO1xyXG5cclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xyXG5hcHAudXNlKGNvcnMoKSk7XHJcbmFwcC51c2UobG9nZ2VyKFwiZGV2XCIpKTtcclxuYXBwLnVzZShcclxuICBcIi9hcGktZG9jc1wiLFxyXG4gIHN3YWdnZXJVaS5zZXJ2ZSxcclxuICBzd2FnZ2VyVWkuc2V0dXAoc3dhZ2dlckRvY3VtZW50LCB7XHJcbiAgICBleHBsb3JlcjogdHJ1ZSxcclxuICB9KVxyXG4pO1xyXG5hcHAudXNlKFwiL2FwaVwiLCByZXN0Um91dGVyKTtcclxuYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk5vdCBGb3VuZCFcIik7XHJcbiAgZXJyb3IubWVzc2FnZSA9IFwiSW52YWxpZCBSb3V0ZVwiO1xyXG4gIGVycm9yLnN0YXR1cyA9IFN0YXR1c0NvZGVzLk5PVF9GT1VORDtcclxuICBuZXh0KGVycm9yKTtcclxufSk7XHJcbmFwcC51c2UoKGVycm9yLCByZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHJlcy5zdGF0dXMoZXJyb3Iuc3RhdHVzIHx8IFN0YXR1c0NvZGVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUik7XHJcbiAgcmV0dXJuIHJlcy5qc29uKHtcclxuICAgIGVycm9yOiB7XHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG59KTtcclxuXHJcbmFwcC5saXN0ZW4oUE9SVCwgZnVuY3Rpb24gKCkge1xyXG4gIGNvbnNvbGUubG9nKGBTZXJ2ZXIgaXMgcnVubmluZyBhdCAke1BPUlR9YCk7XHJcbn0pO1xyXG4iXX0=