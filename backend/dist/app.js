"use strict";

var _express = require("express");

var _express2 = _interopRequireDefault(_express);

var _mongoose = require("mongoose");

var _mongoose2 = _interopRequireDefault(_mongoose);

var _httpStatusCodes = require("http-status-codes");

var _index = require("./api/index");

var _development = require("./config/env/development");

var _globalMiddleware = require("./api/middlewares/global-middleware");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_mongoose2.default.Promise = global.Promise;
_mongoose2.default.connect("mongodb://localhost/" + _development.devConfig.database);

var app = (0, _express2.default)();
var PORT = _development.devConfig.port;

// register global middleware
(0, _globalMiddleware.setGlobalMiddleware)(app);

app.use("/api", _index.restRouter);
app.use(function (req, res, next) {
  var error = new Error("Not Found!");
  error.message = "Invalid Route";
  error.status = _httpStatusCodes.StatusCodes.NOT_FOUND;
  next(error);
});
app.use(function (error, req, res, next) {
  res.status(error.status || _httpStatusCodes.StatusCodes.INTERNAL_SERVER_ERROR);
  return res.json({
    error: {
      message: error.message
    }
  });
});

app.listen(PORT, function () {
  console.log("Server is running at " + PORT);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hcHAuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJQcm9taXNlIiwiZ2xvYmFsIiwiY29ubmVjdCIsImRldkNvbmZpZyIsImRhdGFiYXNlIiwiYXBwIiwiUE9SVCIsInBvcnQiLCJ1c2UiLCJyZXN0Um91dGVyIiwicmVxIiwicmVzIiwibmV4dCIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhdHVzIiwiU3RhdHVzQ29kZXMiLCJOT1RfRk9VTkQiLCJJTlRFUk5BTF9TRVJWRVJfRVJST1IiLCJqc29uIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7Ozs7QUFFQUEsbUJBQVNDLE9BQVQsR0FBbUJDLE9BQU9ELE9BQTFCO0FBQ0FELG1CQUFTRyxPQUFULDBCQUF3Q0MsdUJBQVVDLFFBQWxEOztBQUVBLElBQU1DLE1BQU0sd0JBQVo7QUFDQSxJQUFNQyxPQUFPSCx1QkFBVUksSUFBdkI7O0FBRUE7QUFDQSwyQ0FBb0JGLEdBQXBCOztBQUVBQSxJQUFJRyxHQUFKLENBQVEsTUFBUixFQUFnQkMsaUJBQWhCO0FBQ0FKLElBQUlHLEdBQUosQ0FBUSxVQUFDRSxHQUFELEVBQU1DLEdBQU4sRUFBV0MsSUFBWCxFQUFvQjtBQUMxQixNQUFNQyxRQUFRLElBQUlDLEtBQUosQ0FBVSxZQUFWLENBQWQ7QUFDQUQsUUFBTUUsT0FBTixHQUFnQixlQUFoQjtBQUNBRixRQUFNRyxNQUFOLEdBQWVDLDZCQUFZQyxTQUEzQjtBQUNBTixPQUFLQyxLQUFMO0FBQ0QsQ0FMRDtBQU1BUixJQUFJRyxHQUFKLENBQVEsVUFBQ0ssS0FBRCxFQUFRSCxHQUFSLEVBQWFDLEdBQWIsRUFBa0JDLElBQWxCLEVBQTJCO0FBQ2pDRCxNQUFJSyxNQUFKLENBQVdILE1BQU1HLE1BQU4sSUFBZ0JDLDZCQUFZRSxxQkFBdkM7QUFDQSxTQUFPUixJQUFJUyxJQUFKLENBQVM7QUFDZFAsV0FBTztBQUNMRSxlQUFTRixNQUFNRTtBQURWO0FBRE8sR0FBVCxDQUFQO0FBS0QsQ0FQRDs7QUFTQVYsSUFBSWdCLE1BQUosQ0FBV2YsSUFBWCxFQUFpQixZQUFZO0FBQzNCZ0IsVUFBUUMsR0FBUiwyQkFBb0NqQixJQUFwQztBQUNELENBRkQiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5pbXBvcnQgeyBTdGF0dXNDb2RlcyB9IGZyb20gXCJodHRwLXN0YXR1cy1jb2Rlc1wiO1xyXG5cclxuaW1wb3J0IHsgcmVzdFJvdXRlciB9IGZyb20gXCIuL2FwaS9pbmRleFwiO1xyXG5pbXBvcnQgeyBkZXZDb25maWcgfSBmcm9tIFwiLi9jb25maWcvZW52L2RldmVsb3BtZW50XCI7XHJcbmltcG9ydCB7IHNldEdsb2JhbE1pZGRsZXdhcmUgfSBmcm9tIFwiLi9hcGkvbWlkZGxld2FyZXMvZ2xvYmFsLW1pZGRsZXdhcmVcIjtcclxuXHJcbm1vbmdvb3NlLlByb21pc2UgPSBnbG9iYWwuUHJvbWlzZTtcclxubW9uZ29vc2UuY29ubmVjdChgbW9uZ29kYjovL2xvY2FsaG9zdC8ke2RldkNvbmZpZy5kYXRhYmFzZX1gKTtcclxuXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuY29uc3QgUE9SVCA9IGRldkNvbmZpZy5wb3J0O1xyXG5cclxuLy8gcmVnaXN0ZXIgZ2xvYmFsIG1pZGRsZXdhcmVcclxuc2V0R2xvYmFsTWlkZGxld2FyZShhcHApO1xyXG5cclxuYXBwLnVzZShcIi9hcGlcIiwgcmVzdFJvdXRlcik7XHJcbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJOb3QgRm91bmQhXCIpO1xyXG4gIGVycm9yLm1lc3NhZ2UgPSBcIkludmFsaWQgUm91dGVcIjtcclxuICBlcnJvci5zdGF0dXMgPSBTdGF0dXNDb2Rlcy5OT1RfRk9VTkQ7XHJcbiAgbmV4dChlcnJvcik7XHJcbn0pO1xyXG5hcHAudXNlKChlcnJvciwgcmVxLCByZXMsIG5leHQpID0+IHtcclxuICByZXMuc3RhdHVzKGVycm9yLnN0YXR1cyB8fCBTdGF0dXNDb2Rlcy5JTlRFUk5BTF9TRVJWRVJfRVJST1IpO1xyXG4gIHJldHVybiByZXMuanNvbih7XHJcbiAgICBlcnJvcjoge1xyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgfSxcclxuICB9KTtcclxufSk7XHJcblxyXG5hcHAubGlzdGVuKFBPUlQsIGZ1bmN0aW9uICgpIHtcclxuICBjb25zb2xlLmxvZyhgU2VydmVyIGlzIHJ1bm5pbmcgYXQgJHtQT1JUfWApO1xyXG59KTtcclxuIl19